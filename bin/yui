#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

use Symfony\Component\Console\Application;
use CustomLaravelInstaller\InstallCommand;
use CustomLaravelInstaller\VersionCommand;
use Symfony\Component\Console\Output\ConsoleOutput;

class CustomApplication extends Application
{
    protected function doRunCommand(\Symfony\Component\Console\Command\Command $command, \Symfony\Component\Console\Input\InputInterface $input, \Symfony\Component\Console\Output\OutputInterface $output): int
    {
        return parent::doRunCommand($command, $input, $output);
    }
}

$composerJson = json_decode(file_get_contents(__DIR__ . '/../composer.json'), true);
$version = $composerJson['version'] ?? 'unknown';

$app = new CustomApplication();
$output = new ConsoleOutput();
$output->writeln(PHP_EOL . '  <fg=green>__     __  _    _   _____
  \ \   / / | |  | | |_   _|
   \ \_/ /  | |  | |   | |
    \   /   | |  | |   | |
     | |    | |__| |  _| |_
     |_|     \____/  |_____|</>' . PHP_EOL . PHP_EOL);

$output->writeln(PHP_EOL . '<fg=blue>Yui Installer version: ' . $version . '</>' . PHP_EOL . PHP_EOL);


$app->add(new InstallCommand());
$app->add(new VersionCommand());


$app->run();
